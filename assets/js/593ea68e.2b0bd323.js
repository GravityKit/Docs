"use strict";(self.webpackChunkgravitykit_docs=self.webpackChunkgravitykit_docs||[]).push([[31455],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=p(a),c=r,h=u["".concat(s,".").concat(c)]||u[c]||d[c]||i;return a?n.createElement(h,l(l({ref:t},m),{},{components:a})):n.createElement(h,l({ref:t},m))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},97285:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={id:"55c14201e4b01fdb81eb078d",number:"295",hasDraft:"1",collectionId:"6076f9478996210f18bd33df",popularity:"1.2",publicUrl:"https://docs.gravitykit.com/article/295-math-shortcode",viewCount:"9171",lastPublishedAt:"2022-12-22T08:23:43Z",changeOrigin:"hsapp-js",name:"The [gravitymath] Shortcode",slug:"295-math-shortcode",status:"published",categories:["6155b0bf2b380503dfdf63f0"],createdBy:"59634",createdAt:"2015-08-04T22:51:45Z",updatedBy:"59634",updatedAt:"2022-12-27T20:35:28Z",title:"The [gravitymath] Shortcode",hsEditUrl:"https://secure.helpscout.net/docs/6076f9478996210f18bd33df/article/55c14201e4b01fdb81eb078d",pagination_prev:null,pagination_next:null,last_update:{date:new Date("2022-12-27T20:35:28.000Z"),author:"Zack Katz"}},l="The [gravitymath] Shortcode",o={unversionedId:"gravity-forms-add-ons/gravitymath/55c14201e4b01fdb81eb078d",id:"gravity-forms-add-ons/gravitymath/55c14201e4b01fdb81eb078d",title:"The [gravitymath] Shortcode",description:"In order to use the \\gravitymath\\] shortcode, you must have [GravityMath installed on your website.",source:"@site/docs/gravity-forms-add-ons/gravitymath/295-math-shortcode.mdx",sourceDirName:"gravity-forms-add-ons/gravitymath",slug:"/gravity-forms-add-ons/gravitymath/295-math-shortcode",permalink:"/Docs/gravity-forms-add-ons/gravitymath/295-math-shortcode",draft:!1,editUrl:"https://github.com/GravityKit/Docs/tree/main/docs/gravity-forms-add-ons/gravitymath/295-math-shortcode.mdx",tags:[],version:"current",sidebarPosition:295,frontMatter:{id:"55c14201e4b01fdb81eb078d",number:"295",hasDraft:"1",collectionId:"6076f9478996210f18bd33df",popularity:"1.2",publicUrl:"https://docs.gravitykit.com/article/295-math-shortcode",viewCount:"9171",lastPublishedAt:"2022-12-22T08:23:43Z",changeOrigin:"hsapp-js",name:"The [gravitymath] Shortcode",slug:"295-math-shortcode",status:"published",categories:["6155b0bf2b380503dfdf63f0"],createdBy:"59634",createdAt:"2015-08-04T22:51:45Z",updatedBy:"59634",updatedAt:"2022-12-27T20:35:28Z",title:"The [gravitymath] Shortcode",hsEditUrl:"https://secure.helpscout.net/docs/6076f9478996210f18bd33df/article/55c14201e4b01fdb81eb078d",pagination_prev:null,pagination_next:null,last_update:{date:"2022-12-27T20:35:28.000Z",author:"Zack Katz"}},sidebar:"gravitymath"},s={},p=[{value:"Table of contents:",id:"table-of-contents",level:2},{value:"Pure Math Calculations",id:"pure-math-calculations",level:2},{value:"Calculations Using Gravity Forms Data",id:"calculations-using-gravity-forms-data",level:2},{value:"Calculations for a Single Gravity Forms Entry",id:"calculations-for-a-single-gravity-forms-entry",level:3},{value:"Calculations for All Entries in a Gravity Form",id:"calculations-for-all-entries-in-a-gravity-form",level:3},{value:"Using [gravitymath] Inside a View",id:"using-gravitymath-inside-a-view",level:2},{value:"Performing Calculations for All Entries in a View",id:"performing-calculations-for-all-entries-in-a-view",level:3},{value:"Performing Calculations for All Visible Entries in a View",id:"performing-calculations-for-all-visible-entries-in-a-view",level:3},{value:"Performing Calculations for the Current Entry in View",id:"performing-calculations-for-the-current-entry-in-view",level:3},{value:"Calculating Summaries Using Filters",id:"calculating-summaries-using-filters",level:2},{value:"Nesting shortcodes",id:"nesting-shortcodes",level:2},{value:"All Shortcode Parameters",id:"all-shortcode-parameters",level:2},{value:"Parameters Available When Performing Calculations on Gravity Forms Data",id:"parameters-available-when-performing-calculations-on-gravity-forms-data",level:3},{value:"All Supported Math Functions and Constants",id:"all-supported-math-functions-and-constants",level:2},{value:"Functions",id:"functions",level:3},{value:"Constants",id:"constants",level:3},{value:"Math Function Examples",id:"math-function-examples",level:3},{value:"Notes on Shortcode Use",id:"notes-on-shortcode-use",level:2},{value:"General Things to Know",id:"general-things-to-know",level:3},{value:"Mathematical Precision",id:"mathematical-precision",level:3}],m={toc:p},u="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"the-gravitymath-shortcode"},"The ","[gravitymath]"," Shortcode"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"In order to use the ","[","gravitymath","]"," shortcode, you must have ",(0,r.kt)("a",{parentName:"p",href:"https://www.gravitykit.com/extensions/math/"},"GravityMath")," installed on your website.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcode allows you to perform advanced math calculations on your website. With ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]"),", you can:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Perform pure math calculations"),(0,r.kt)("li",{parentName:"ul"},"Perform calculations using data collected via Gravity Forms"),(0,r.kt)("li",{parentName:"ul"},"Perform calculations on entry data in a View created with GravityView")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcode is very powerful. There\u2019s a lot you can do with it. In this article, we'll give you a comprehensive overview of how to use ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]"),", complete with practical examples where applicable. To help make this doc easier to navigate, we\u2019ve created a table of contents with clickable anchor links that will take you directly to the relevant sections."),(0,r.kt)("h2",{id:"table-of-contents"},"Table of contents:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#pure-math-calculations"},"Pure Math Calculations"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#calculations-using-gravity-forms-data"},"Calculations Using Gravity Forms Data"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#calculations-for-a-single-gravity-forms-entry"},"Calculations for a Single Gravity Forms Entry"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#calculations-for-all-entries-in-a-gravity-form"},"Calculations for All Entries in a Gravity Form"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#using-math-inside-a-view"}," Using ","[","gravitymath","]"," Inside a View"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"%20#calculations-for-all-entries-in-a-view"},"Calculations for All Entries in a View"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#calculations-for-all-visible-entries"},"Calculations for All Visible Entries"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#calculations-for-the-current-entry"},"Calculations for the Current Entry"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#calculating-summaries"},"Calculating Summaries Using Filters"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#nesting"},"Nesting shortcodes"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#all-parameters"},"All Shortcode Parameters"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#all-supported-functions"},"All Supported Math Functions and Constants"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#functions"},"Functions"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#constants"},"Constants"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#shortcode-use"},"Notes on Shortcode Use"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#general"},"General Things to Know"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#precision"},"Mathematical Precision")))),(0,r.kt)("h2",{id:"pure-math-calculations"},"Pure Math Calculations"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Format"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath] 3 * 7 [/gravitymath]")),(0,r.kt)("p",null,"Pure math calculations don't require GravityView or Gravity Forms!"),(0,r.kt)("p",null,"You can perform pure calculations anywhere on your website. When performing pure math calculations, there should be no other text in the formula (i.e., no Gravity Forms merge tags), just math!"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Here\u2019s a basic example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[gravitymath] 2 * 300 [/gravitymath]\n")),(0,r.kt)("p",null,"Returns: ",(0,r.kt)("inlineCode",{parentName:"p"},"600")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"You can also use constants and functions:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[gravitymath] PI / avg(7, 8, 9) [/gravitymath]\n")),(0,r.kt)("p",null,"Returns: ",(0,r.kt)("inlineCode",{parentName:"p"},"75.398223686")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": Scroll down to the end for a list of supported functions and constants."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"You can also define your math equation using the ",(0,r.kt)("inlineCode",{parentName:"strong"},"formula")," parameter, instead of placing in between the shortcodes, like this:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath formula="pow( 5, 2 )" /]\n')),(0,r.kt)("p",null,"Returns: ",(0,r.kt)("inlineCode",{parentName:"p"},"25")," (5^2)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"If you want to specify the number of decimal places, use the ",(0,r.kt)("inlineCode",{parentName:"strong"},"decimals")," parameter:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath decimals="0"] PI [/gravitymath]\n')),(0,r.kt)("p",null,"Returns: ",(0,r.kt)("inlineCode",{parentName:"p"},"3")),(0,r.kt)("p",null,"As you can see, anything inside the shortcode (or defined using the ",(0,r.kt)("inlineCode",{parentName:"p"},"formula")," shortcode parameter) is processed as a mathematical equation and is calculated."),(0,r.kt)("h2",{id:"calculations-using-gravity-forms-data"},"Calculations Using Gravity Forms Data"),(0,r.kt)("p",null,"Using the ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcode, you can perform advanced calculations using data you collect via Gravity Forms. You can either perform calculations using data from a single form entry, or using data from all entries attached to a specific form."),(0,r.kt)("h3",{id:"calculations-for-a-single-gravity-forms-entry"},"Calculations for a Single Gravity Forms Entry"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Format"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath scope=\u201centry\u201d id=\u201c{entry id}\u201d]")),(0,r.kt)("p",null,"To perform calculations for a single Gravity Forms entry, you\u2019ll need to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"scope")," parameter and set its value to \u201centry\u201d. You\u2019ll also need to provide the ID of the entry itself. To use Gravity Forms field values in your calculations, use merge tags."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Display the value of a single numeric field:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="entry" id="123"] {Number:5} [/gravitymath]\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using math functions:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="entry" id="123"]\n    avg( 0, {Number:5} )\n[/gravitymath]\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using multiple field values:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="entry" id="123"] sum( 1, 5, 10, 20, {Number:5}, {OtherNumber:6} ) [/gravitymath]\n')),(0,r.kt)("h3",{id:"calculations-for-all-entries-in-a-gravity-form"},"Calculations for All Entries in a Gravity Form"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Format:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath scope=\u201cform\u201d id=\u201c{form id}\u201d]")),(0,r.kt)("p",null,"To perform calculations for all entries in a Gravity Form, you\u2019ll need to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"scope")," parameter and set its value to \u201cform\u201d. You\u2019ll also need to provide the ID of the form itself. To use Gravity Forms field values in your calculations, use merge tags."),(0,r.kt)("p",null,"There are also special modifiers you can add to the Gravity Forms merge tags to fetch different values:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},":sum")," - The sum of all field values for the form (this is also the default behavior for the form scope)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},":max")," - The highest field value."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},":min")," - The lowest field value."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},":avg")," - The average of all field values."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},":count")," - The number of entries processed.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Calculate the sum of field values:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="form" id="9"] {Number:5:sum} [/gravitymath]\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Calculate the number of form entries:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="form" id="9"] {Number:5:count} [/gravitymath]\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Calculate the average value for a field:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="form" id="9"] {Number:5:avg} [/gravitymath]\n')),(0,r.kt)("h2",{id:"using-gravitymath-inside-a-view"},"Using ","[","gravitymath","]"," Inside a View"),(0,r.kt)("p",null,"You can perform calculations on your Gravity Forms data inside a View created using GravityView. You can do this by placing the ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcode inside a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.gravitykit.com/article/111-using-the-custom-content-field"},"Custom Content field")," or widget."),(0,r.kt)("p",null,"There are three options when performing calculations inside Views. You can either perform calculations for all entries in a View, only the visible entries, or only the current entry."),(0,r.kt)("h3",{id:"performing-calculations-for-all-entries-in-a-view"},"Performing Calculations for All Entries in a View"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Format"),": ",(0,r.kt)("inlineCode",{parentName:"p"},'[gravitymath scope="view" id=\u201c{view_id}\u201d]')),(0,r.kt)("p",null,"To perform calculations on all entries inside a View, set the ",(0,r.kt)("inlineCode",{parentName:"p"},"scope")," parameter to \u201cview\u201d and specify the View ID."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Calculate the sum of field values for all entries in a View:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="view" id=\u201c27\u201d] {Number:5:sum} [/gravitymath]\n')),(0,r.kt)("h3",{id:"performing-calculations-for-all-visible-entries-in-a-view"},"Performing Calculations for All Visible Entries in a View"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Format"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath scope=\u201cvisible\u201d]")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": This will not work with the DataTables layout."),(0,r.kt)("p",null,"To perform calculations based on all visible entries in a View, set the ",(0,r.kt)("inlineCode",{parentName:"p"},"scope")," parameter equal to \u201cvisible\u201d. This works within a GravityView Custom Content Field or Custom Content Widget, as well as when placed on the same page as a ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravityview]")," shortcode. The calculation result will change based on which entries are currently visible in the View."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Display the total number of sales:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="visible"] {Sales:12:count} [/gravitymath]\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Calculate total revenue:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="visible"] {Product:3} + {Another Product:4} decimals="2" [/gravitymath]\n')),(0,r.kt)("h3",{id:"performing-calculations-for-the-current-entry-in-view"},"Performing Calculations for the Current Entry in View"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Format"),": ",(0,r.kt)("inlineCode",{parentName:"p"},'[gravitymath scope="entry"]')),(0,r.kt)("p",null,"To perform calculations using the current entry, set the ",(0,r.kt)("inlineCode",{parentName:"p"},"scope")," parameter equal to \u201centry\u201d and don\u2019t define the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," parameter. (This only works for the Custom Content Field, not the Widget)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[gravitymath scope=\u201centry\u201d] {Number:5} * 5 [/gravitymath]\n")),(0,r.kt)("h2",{id:"calculating-summaries-using-filters"},"Calculating Summaries Using Filters"),(0,r.kt)("p",null,"Using the ",(0,r.kt)("inlineCode",{parentName:"p"},"filter")," parameter, you can group Gravity Forms entries by a specific field value and then perform math operations on entries within those groups. The ",(0,r.kt)("inlineCode",{parentName:"p"},"filter")," parameter only works for ",(0,r.kt)("inlineCode",{parentName:"p"},"scope=\u201cview\u201d")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"scope=\u201cform\u201d"),"."),(0,r.kt)("p",null,"Here\u2019s an example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath scope="view" id="12" filter="filter_1=Yes\u201d]\n')),(0,r.kt)("p",null,"Here\u2019s a breakdown of all the filtering parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"filter_N")," - the filter, where N is the ID of the field, entry attribute, or a meta key that you want to filter by"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"op_N")," - the operation for a corresponding ",(0,r.kt)("inlineCode",{parentName:"li"},"filter_N"),", default: ",(0,r.kt)("inlineCode",{parentName:"li"},"is")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"limit")," - the number of entries, (default is ",(0,r.kt)("inlineCode",{parentName:"li"},"0"),", i.e., process all the entries)")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To learn more about calculating summaries using the filter parameter, read ",(0,r.kt)("a",{parentName:"p",href:"https://docs.gravitykit.com/article/853-how-to-display-summaries-using-gvmath"},"How to Display Summaries Using ","[","gravitymath","]"),".")),(0,r.kt)("h2",{id:"nesting-shortcodes"},"Nesting shortcodes"),(0,r.kt)("p",null,"You can also nest multiple shortcodes to create more complex calculations. This also allows you to use data from different Gravity Forms in one single equation. Here's an example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[gravitymath] \n\n[gravitymath2 scope="form" id="11"] {Product:1} * {quantity:1} [/gv_math2] + [gravitymath2 scope="form" id="4"] {Product:2} * {quantity:2} [/gv_math2] \n\n[/gravitymath]\n')),(0,r.kt)("p",null,"Read ",(0,r.kt)("a",{parentName:"p",href:"https://docs.gravitykit.com/article/900-nested-calculations"},"this article")," to learn more about nesting ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcodes."),(0,r.kt)("h2",{id:"all-shortcode-parameters"},"All Shortcode Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"decimals")," - The number of decimals to display. If undefined, displays the number of decimals returned by the math result."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"format")," - Whether or not to format the number. If set to ",(0,r.kt)("inlineCode",{parentName:"li"},"raw")," - Display the number, unformatted. Otherwise, format the number using WordPress' ",(0,r.kt)("inlineCode",{parentName:"li"},"number_format_i18n()")," function."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"formula")," - Instead of defining the formula inside the shortcode you can define it using the ",(0,r.kt)("inlineCode",{parentName:"li"},"formula")," parameter."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"debug")," - Show or hide error messages. Either ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"filter")," - Used to target a specific field value. Only works with ",(0,r.kt)("inlineCode",{parentName:"li"},'scope="view"')," or ",(0,r.kt)("inlineCode",{parentName:"li"},'scope="form"'),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"default_value")," - If a value is not valid, use the default value. Pass ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," to enable, or ",(0,r.kt)("inlineCode",{parentName:"li"},"skip")," to skip the invalid value. (Default: ",(0,r.kt)("inlineCode",{parentName:"li"},"skip"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"notices")," - Display notices to end users if there are warnings or errors associated with the formula. Pass ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," to enable. (Default: ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),"). ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gravityview/math/accuracy_message")," shortcode available to override default warning notice. (Default: ","*"," Results may not be accurate.)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gravityview/math/no_results_message")," shortcode available to override default Error notice. (Default: ","*","*"," No Results Currently Available.)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gravityview/math/admin_notice")," shortcode available to override default Admin notice. (Default: You can only see this message because you are logged in and have permissions.)")))),(0,r.kt)("h3",{id:"parameters-available-when-performing-calculations-on-gravity-forms-data"},"Parameters Available When Performing Calculations on Gravity Forms Data"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"id")," - The ID of the form, entry, or View (if ",(0,r.kt)("inlineCode",{parentName:"li"},"scope")," is defined). Default: ",(0,r.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"scope")," - If not defined, the shortcode performs pure math. ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"form")," - Use the sum of all the form values for the specified form ID. Requires an ",(0,r.kt)("inlineCode",{parentName:"li"},"id")," parameter."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"entry")," - Use the values of a single entry. Requires the ",(0,r.kt)("inlineCode",{parentName:"li"},"id")," parameter if used outside a Custom Content field, otherwise, not needed."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"visible")," - Use the values of only visible entries for the current GravityView View. Must be used inside a Custom Content widget on a View. It doesn't work with DataTables."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"view")," - Use the values of all valid entries for the specified View ID. Requires an ",(0,r.kt)("inlineCode",{parentName:"li"},"id")," parameter.")))),(0,r.kt)("h2",{id:"all-supported-math-functions-and-constants"},"All Supported Math Functions and Constants"),(0,r.kt)("p",null,"Here\u2019s a list of all the mathematical functions and constants supported by ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]"),". You can use these with any scope."),(0,r.kt)("h3",{id:"functions"},"Functions"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcode supports the following mathematical functions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"abs()")," - Returns the absolute value of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/abs"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"acos()")," - Returns the arccosine (in radians) of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/acos"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"asin()")," - Returns the arcsine (in radians) of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/asin"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"atan()")," - Returns the arctangent (in radians) of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atan"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"avg( num1, num2, etc )")," - Returns the mean of all the items passed to the function. Example: ",(0,r.kt)("inlineCode",{parentName:"li"},"avg( 3, 9, 27 )")," returns ",(0,r.kt)("inlineCode",{parentName:"li"},"13")," ( The sum of the numbers, 39, divided by the item count 3)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ceil()")," - Returns the smallest integer greater than or equal to a given number. Example: ",(0,r.kt)("inlineCode",{parentName:"li"},"ceil( 10.284742 )")," returns ",(0,r.kt)("inlineCode",{parentName:"li"},"11"),". ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cos()")," - Returns the cosine of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cos"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"count()")," - Returns the number of items passed to the function. Example: ",(0,r.kt)("inlineCode",{parentName:"li"},"count( 1, 2, 3, 4 )")," returns ",(0,r.kt)("inlineCode",{parentName:"li"},"4"),". ",(0,r.kt)("a",{parentName:"li",href:"https://php.net/manual/en/function.count.php"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"deg2rad()")," - Returns the number of radians converted from the number in degrees. ",(0,r.kt)("a",{parentName:"li",href:"https://php.net/manual/en/function.deg2rad.php"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"exp()")," - Returns ",(0,r.kt)("inlineCode",{parentName:"li"},"ex"),", where ",(0,r.kt)("inlineCode",{parentName:"li"},"x")," is the argument, and ",(0,r.kt)("inlineCode",{parentName:"li"},"e")," is Euler's constant, the base of the natural logarithms. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/exp"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"floor()")," - Returns the largest integer less than or equal to a given number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"log( number, e )")," - Returns the natural logarithm (base e) of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"max( num1, num2, etc )")," - Returns the largest of zero or more numbers. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/max"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"min( num1, num2, etc )")," - Returns the smallest of zero or more numbers. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/min"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pow( base, exponent )")," - Returns the base to the exponent power, that is, base^exponent. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/pow"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rad2deg()")," - Returns the number of degrees converted from a radian number. ",(0,r.kt)("a",{parentName:"li",href:"https://php.net/manual/en/function.rad2deg.php"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"round( number, precision )")," - Returns the rounded value of val to specified precision (number of digits after the decimal point). ",(0,r.kt)("inlineCode",{parentName:"li"},"precision")," can also be negative or zero (default). ",(0,r.kt)("a",{parentName:"li",href:"https://php.net/manual/en/function.round.php"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sin()")," - Returns the sine of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sin"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sqrt()")," - Returns the square root of a number. ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sqrt"},"Learn more"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sum( num1, num2, etc )")," - Returns the total resulting from the addition of the items passed to the function.")),(0,r.kt)("h3",{id:"constants"},"Constants"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcode supports the following mathematical constants:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PI")," - \u03c0 constant (Defaults to 13 decimal places: ",(0,r.kt)("inlineCode",{parentName:"li"},"3.1415926535898"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PI_2")," - \u03c0 constant / 2 (",(0,r.kt)("inlineCode",{parentName:"li"},"1.5707963267949"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PI_4")," - \u03c0 constant / 4 (",(0,r.kt)("inlineCode",{parentName:"li"},"0.78539816339745"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"E")," - e constant (",(0,r.kt)("inlineCode",{parentName:"li"},"2.718281828459"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SQRT_PI")," - Square root of \u03c0 (",(0,r.kt)("inlineCode",{parentName:"li"},"0.63661977236758"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SQRT_2")," - Square root of 2 (",(0,r.kt)("inlineCode",{parentName:"li"},"1.4142135623731"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SQRT_3")," - Square root of 3 (",(0,r.kt)("inlineCode",{parentName:"li"},"1.7320508075689"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"LN_PI")," - The natural logarithm of \u03c0 (",(0,r.kt)("inlineCode",{parentName:"li"},"1.1447298858494"),").")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": ",(0,r.kt)("em",{parentName:"p"},"The number values represented below are defined by PHP. We know the numbers below aren't all limited to 13 decimal places"),"."),(0,r.kt)("h3",{id:"math-function-examples"},"Math Function Examples"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[gravitymath]\nceil( ( 51 * 2 ) + ( 15 / 2 ) )\n[/gravitymath]\n")),(0,r.kt)("p",null,"Will return: ",(0,r.kt)("inlineCode",{parentName:"p"},"110")," because the formula inside the function ",(0,r.kt)("inlineCode",{parentName:"p"},"(( 51 * 2 ) + ( 15 / 2 ))")," equals ",(0,r.kt)("inlineCode",{parentName:"p"},"109.5"),". That value is then passed to the ",(0,r.kt)("inlineCode",{parentName:"p"},"ceil()")," function, which finds the next highest integer. The next highest integer is ",(0,r.kt)("inlineCode",{parentName:"p"},"110"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[gravitymath]\nround( 42.8 )\n[/gravitymath]\n")),(0,r.kt)("p",null,"Will return ",(0,r.kt)("inlineCode",{parentName:"p"},"43")," because ",(0,r.kt)("inlineCode",{parentName:"p"},".8")," rounds up."),(0,r.kt)("h2",{id:"notes-on-shortcode-use"},"Notes on Shortcode Use"),(0,r.kt)("p",null,"Here are some important things to keep in mind when using the ",(0,r.kt)("inlineCode",{parentName:"p"},"[gravitymath]")," shortcode."),(0,r.kt)("h3",{id:"general-things-to-know"},"General Things to Know"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Decimals require a leading number: ",(0,r.kt)("inlineCode",{parentName:"li"},"50 + .5")," is invalid because the decimal doesn't have a number in front of it. Use ",(0,r.kt)("inlineCode",{parentName:"li"},"50 + 0.5")," instead."),(0,r.kt)("li",{parentName:"ul"},"If using a Gravity Forms merge tag for a price, make sure to add ",(0,r.kt)("inlineCode",{parentName:"li"},":price")," to the end of the merge tag. This will convert the currency format (with currency symbol like $) to a number format: ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Total fields: ",(0,r.kt)("inlineCode",{parentName:"li"},"{Total:32}")," becomes ",(0,r.kt)("inlineCode",{parentName:"li"},"{Total:32:price}")),(0,r.kt)("li",{parentName:"ul"},"Product fields: ",(0,r.kt)("inlineCode",{parentName:"li"},"{Product Name (Price):28.2}")," becomes ",(0,r.kt)("inlineCode",{parentName:"li"},"{Product Name (Price):28:price}")," - note that you need to remove the ",(0,r.kt)("inlineCode",{parentName:"li"},".2")," from the end of the field number (",(0,r.kt)("inlineCode",{parentName:"li"},"28.2")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"28"),", for example)"))),(0,r.kt)("li",{parentName:"ul"},"Nest away! You can nest parenthesis to your heart's delight. An equation like ",(0,r.kt)("inlineCode",{parentName:"li"},"( 1 + 2 ) + ( 3 / ( 4 * ( 5 + 6 ) ) )")," will work just fine."),(0,r.kt)("li",{parentName:"ul"},"Extra spacing is not a problem - you can use extra spacing in the formula inside the ",(0,r.kt)("inlineCode",{parentName:"li"},"[gravitymath]")," shortcode tags; line breaks inside the formula parameter aren't allowed. Example of extra spacing that still works: ",(0,r.kt)("inlineCode",{parentName:"li"},"[gravitymath] avg( ( 100 / 3747 ), ( 48672 * 2746 ) ) [/gravitymath]"),".")),(0,r.kt)("h3",{id:"mathematical-precision"},"Mathematical Precision"),(0,r.kt)("p",null,"The precision of the math functions is not exact for numbers with many decimal digits. The math library uses PHP's float definition, which is has a precision of roughly 14 decimal places. ",(0,r.kt)("a",{parentName:"p",href:"http://floating-point-gui.de/basic/"},"Learn more about floats"),"."),(0,r.kt)("p",null,"Because of this issue of precision, if the decimal parameter is not defined, the shortcode automatically limits precision to 16 decimal places. This 16 limit can be overridden using the ",(0,r.kt)("inlineCode",{parentName:"p"},"gravityview/math/precision")," filter."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// Turn off the limit altogether\nadd_filter( 'gravityview/math/precision', '__return_false' );\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// Or you can modify the precision limit (here, to 14)\nadd_filter( 'gravityview/math/precision', function() { return 14; } );\n")))}d.isMDXComponent=!0}}]);