"use strict";(self.webpackChunkgravitykit_docs=self.webpackChunkgravitykit_docs||[]).push([[42463],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>g});var o=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):n(n({},t),e)),r},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(r),u=a,g=m["".concat(l,".").concat(u)]||m[u]||d[u]||i;return r?o.createElement(g,n(n({ref:t},c),{},{components:r})):o.createElement(g,n({ref:t},c))}));function g(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,n=new Array(i);n[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:a,n[1]=s;for(var p=2;p<i;p++)n[p]=r[p];return o.createElement.apply(null,n)}return o.createElement.apply(null,r)}u.displayName="MDXCreateElement"},45031:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var o=r(87462),a=(r(67294),r(3905));const i={id:"5d7aa7c92c7d3a7e9ae11953",number:"626",collectionId:"54d1a05ce4b086c0c0964ccd",popularity:"4.1",publicUrl:"https://docs.gravitykit.com/article/626-google-maps-error-referernotallowedmaperror",viewCount:"39022",lastPublishedAt:"2022-10-13T23:33:30Z",changeOrigin:"unknown",name:'Google Maps Javascript API Error "RefererNotAllowedMapError"',slug:"626-google-maps-error-referernotallowedmaperror",status:"published",categories:["55b67132e4b0e667e2a44567"],createdBy:"365564",createdAt:"2019-09-12T20:17:13Z",updatedBy:"80506",updatedAt:"2022-10-13T23:33:30Z",title:'Google Maps Javascript API Error "RefererNotAllowedMapError"',hsEditUrl:"https://secure.helpscout.net/docs/54d1a05ce4b086c0c0964ccd/article/5d7aa7c92c7d3a7e9ae11953",pagination_prev:null,pagination_next:null,last_update:{date:new Date("2022-10-13T23:33:30.000Z"),author:"Rafael Ehlers"}},n='Google Maps Javascript API Error "RefererNotAllowedMapError"',s={unversionedId:"gravity-forms-add-ons/gravityview/extensions-layouts/maps-premium-view/5d7aa7c92c7d3a7e9ae11953",id:"gravity-forms-add-ons/gravityview/extensions-layouts/maps-premium-view/5d7aa7c92c7d3a7e9ae11953",title:'Google Maps Javascript API Error "RefererNotAllowedMapError"',description:"Show form entries on a Google Map in WordPress with GravityView Maps!",source:"@site/docs/gravity-forms-add-ons/gravityview/extensions-layouts/maps-premium-view/626-google-maps-error-referernotallowedmaperror.mdx",sourceDirName:"gravity-forms-add-ons/gravityview/extensions-layouts/maps-premium-view",slug:"/gravity-forms-add-ons/gravityview/extensions-layouts/maps-premium-view/626-google-maps-error-referernotallowedmaperror",permalink:"/Docs/gravity-forms-add-ons/gravityview/extensions-layouts/maps-premium-view/626-google-maps-error-referernotallowedmaperror",draft:!1,editUrl:"https://github.com/GravityKit/Docs/tree/main/docs/gravity-forms-add-ons/gravityview/extensions-layouts/maps-premium-view/626-google-maps-error-referernotallowedmaperror.mdx",tags:[],version:"current",sidebarPosition:626,frontMatter:{id:"5d7aa7c92c7d3a7e9ae11953",number:"626",collectionId:"54d1a05ce4b086c0c0964ccd",popularity:"4.1",publicUrl:"https://docs.gravitykit.com/article/626-google-maps-error-referernotallowedmaperror",viewCount:"39022",lastPublishedAt:"2022-10-13T23:33:30Z",changeOrigin:"unknown",name:'Google Maps Javascript API Error "RefererNotAllowedMapError"',slug:"626-google-maps-error-referernotallowedmaperror",status:"published",categories:["55b67132e4b0e667e2a44567"],createdBy:"365564",createdAt:"2019-09-12T20:17:13Z",updatedBy:"80506",updatedAt:"2022-10-13T23:33:30Z",title:'Google Maps Javascript API Error "RefererNotAllowedMapError"',hsEditUrl:"https://secure.helpscout.net/docs/54d1a05ce4b086c0c0964ccd/article/5d7aa7c92c7d3a7e9ae11953",pagination_prev:null,pagination_next:null,last_update:{date:"2022-10-13T23:33:30.000Z",author:"Rafael Ehlers"}},sidebar:"maps-premium-view"},l={},p=[{value:"1. Remove restrictions on the API key to debug",id:"1-remove-restrictions-on-the-api-key-to-debug",level:2},{value:"2. Wait five minutes!",id:"2-wait-five-minutes",level:2},{value:"3. If it works, great! You have identified that the referrer is the issue.",id:"3-if-it-works-great-you-have-identified-that-the-referrer-is-the-issue",level:2},{value:"So we now restore an &quot;Application restriction&quot; setting.",id:"so-we-now-restore-an-application-restriction-setting",level:3},{value:"If everything still works on your site, set &quot;API restrictions&quot;",id:"if-everything-still-works-on-your-site-set-api-restrictions",level:3}],c={toc:p},m="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(m,(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"google-maps-javascript-api-error-referernotallowedmaperror"},'Google Maps Javascript API Error "RefererNotAllowedMapError"'),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("h3",{parentName:"admonition",id:"show-form-entries-on-a-google-map-in-wordpress-with-gravityview-maps"},"Show form entries on a Google Map in WordPress with ",(0,a.kt)("a",{parentName:"h3",href:"https://www.gravitykit.com/extensions/maps/"},"GravityView Maps!")),(0,a.kt)("p",{parentName:"admonition"},"This article is about GravityView, the best way to display entries on a map in WordPress. It geocodes and displays ",(0,a.kt)("a",{parentName:"p",href:"https://www.gravitykit.com/gravityforms"},"Gravity Forms")," form submissions on a map.")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.gravitykit.com/extensions/maps/"},(0,a.kt)("img",{parentName:"a",src:"https://s3.amazonaws.com/helpscout.net/docs/assets/54c58489e4b051242988532c/images/5d7aa87404286364bc8f0feb/file-3AFmwwYaKJ.png",alt:null}))),(0,a.kt)("p",null,"If your map is not displaying and your browser console shows the  ",(0,a.kt)("strong",{parentName:"p"},'"Google Maps JavaScript API error: RefererNotAllowedMapError"')," it means the URL loading the Maps JavaScript API is not on the list of allowed referrers. Please check the referrer settings of your API key in the ",(0,a.kt)("a",{parentName:"p",href:"https://cloud.google.com/console/google/maps-apis/overview"},"Google Cloud Platform Console"),"."),(0,a.kt)("h2",{id:"1-remove-restrictions-on-the-api-key-to-debug"},"1. Remove restrictions on the API key to debug"),(0,a.kt)("p",null,"Removing any restrictions can help identify whether they're causing unexpected issues."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to the ",(0,a.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/google/maps-apis/credentials"},"Credentials page of your Google Cloud Platform Console"),"."),(0,a.kt)("li",{parentName:"ol"},'If you see a Maps API key under the "API Keys" header, click on the name of it to edit:',(0,a.kt)("br",{parentName:"li"}),(0,a.kt)("img",{parentName:"li",src:"https://i.gravitykit.com/CWE7u4+",alt:"API Keys table, with arrow pointing the a row with a 'My Maps API Key' link"})),(0,a.kt)("li",{parentName:"ol"},"Remove restrictions: ",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},'For "Application restrictions", set to "None"',(0,a.kt)("img",{parentName:"li",src:"https://s3.amazonaws.com/helpscout.net/docs/assets/54c58489e4b051242988532c/images/5d7aaaba04286364bc8f100d/file-C1HCm8Ae1b.png",alt:"Application restrictions set to None in the Google Cloud Platform Console"})),(0,a.kt)("li",{parentName:"ol"},'Under "API restrictions", set to "Don\'t restrict key"',(0,a.kt)("img",{parentName:"li",src:"https://s3.amazonaws.com/helpscout.net/docs/assets/54c58489e4b051242988532c/images/5d7aaa532c7d3a7e9ae11983/file-wUvDFKj6uK.png",alt:"API restrictions set to Don't restrict key in the Google Cloud Platform Console"})),(0,a.kt)("li",{parentName:"ol"},"Click Save  ",(0,a.kt)("img",{parentName:"li",src:"https://i.gravitykit.com/Ah7IAp+",alt:null}))))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Please note, It can take up to 5 minutes for your new settings to take effect"),", so you might have to wait a few minutes before refreshing the View and seeing the map."),(0,a.kt)("h2",{id:"2-wait-five-minutes"},"2. Wait five minutes!"),(0,a.kt)("h2",{id:"3-if-it-works-great-you-have-identified-that-the-referrer-is-the-issue"},"3. If it works, great! You have identified that the referrer is the issue."),(0,a.kt)("p",null,'You won\'t want to leave the "API restrictions" and "Application restrictions" settings there; this will mean that others will be able to use your Maps API key anywhere, potentially costing you money.'),(0,a.kt)("h3",{id:"so-we-now-restore-an-application-restriction-setting"},'So we now restore an "Application restriction" setting.'),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'Set "Application restriction" to "HTTP referrers"'),(0,a.kt)("li",{parentName:"ol"},'Click "ADD AN ITEM"  ',(0,a.kt)("img",{parentName:"li",src:"https://i.gravitykit.com/wwgvmr+",alt:null})),(0,a.kt)("li",{parentName:"ol"},'Set "Referrer" to ',(0,a.kt)("strong",{parentName:"li"},"*",".yoursite.com/","*"),' \u2014 make sure to replace "yoursite.com" with your domain (without www.!). This will allow the API to run on all the variations of your website (',(0,a.kt)("a",{parentName:"li",href:"http://www.example.com"},"www.example.com"),", example.com, subdomain.example.com)."),(0,a.kt)("li",{parentName:"ol"},'If you have another site you want the maps to work on, click on "ADD AN ITEM" again to add another site.'),(0,a.kt)("li",{parentName:"ol"},"Save the settings again"),(0,a.kt)("li",{parentName:"ol"},"Wait five minutes"),(0,a.kt)("li",{parentName:"ol"},'If your site still doesn\'t work, try using the "IP addresses" restriction and entering the IP address of your server. Then (yep) wait another five minutes :-)')),(0,a.kt)("h3",{id:"if-everything-still-works-on-your-site-set-api-restrictions"},'If everything still works on your site, set "API restrictions"'),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'Under "API restrictions", select "Restrict key"'),(0,a.kt)("li",{parentName:"ol"},'Check the "Geocoding API" and "Maps Javascript API" checkboxes (see image below)  ',(0,a.kt)("img",{parentName:"li",src:"https://i.gravitykit.com/EWqx0d+",alt:null})),(0,a.kt)("li",{parentName:"ol"},"Save the settings"),(0,a.kt)("li",{parentName:"ol"},"Wait another five minutes!")),(0,a.kt)("p",null,"These settings should continue to work\u2014if they don't, check all the boxes in the list, save, and wait five minutes. If it works again, then deselect one checkbox at a time and see which one makes things not work!"))}d.isMDXComponent=!0}}]);