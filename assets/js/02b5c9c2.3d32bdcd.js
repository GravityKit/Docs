"use strict";(self.webpackChunkgravitykit_docs=self.webpackChunkgravitykit_docs||[]).push([[67551],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>f});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),s=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},v=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=d(e,["components","mdxType","originalType","parentName"]),u=s(a),v=r,f=u["".concat(l,".").concat(v)]||u[v]||p[v]||i;return a?n.createElement(f,o(o({ref:t},c),{},{components:a})):n.createElement(f,o({ref:t},c))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=v;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d[u]="string"==typeof e?e:r,o[1]=d;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}v.displayName="MDXCreateElement"},60079:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>d,toc:()=>s});var n=a(87462),r=(a(67294),a(3905));const i={id:"5e4b17672c7d3a7e9ae7e14a",number:"677",collectionId:"54d1a05ce4b086c0c0964ccd",popularity:"0.1",publicUrl:"https://docs.gravitykit.com/article/677-advanced-filters-upgrade",viewCount:"611",lastPublishedAt:"2022-10-14T19:21:34Z",changeOrigin:"unknown",name:"(Advanced) What changed from 1.x to 2.0?",slug:"677-advanced-filters-upgrade",status:"published",categories:["54d1a064e4b086c0c0964ccf"],createdBy:"59634",createdAt:"2020-02-17T22:44:55Z",updatedBy:"80506",updatedAt:"2022-10-14T19:21:34Z",title:"(Advanced) What changed from 1.x to 2.0?",hsEditUrl:"https://secure.helpscout.net/docs/54d1a05ce4b086c0c0964ccd/article/5e4b17672c7d3a7e9ae7e14a",pagination_prev:null,pagination_next:null,last_update:{date:new Date("2022-10-14T19:21:34.000Z"),author:"Rafael Ehlers"}},o="(Advanced) What changed from 1.x to 2.0?",d={unversionedId:"gravity-forms-add-ons/gravityview/extensions-layouts/advanced-filter/5e4b17672c7d3a7e9ae7e14a",id:"gravity-forms-add-ons/gravityview/extensions-layouts/advanced-filter/5e4b17672c7d3a7e9ae7e14a",title:"(Advanced) What changed from 1.x to 2.0?",description:"Note: This article is for developers.",source:"@site/docs/gravity-forms-add-ons/gravityview/extensions-layouts/advanced-filter/677-advanced-filters-upgrade.mdx",sourceDirName:"gravity-forms-add-ons/gravityview/extensions-layouts/advanced-filter",slug:"/gravity-forms-add-ons/gravityview/extensions-layouts/advanced-filter/677-advanced-filters-upgrade",permalink:"/Docs/gravity-forms-add-ons/gravityview/extensions-layouts/advanced-filter/677-advanced-filters-upgrade",draft:!1,editUrl:"https://github.com/GravityKit/Docs/tree/main/docs/gravity-forms-add-ons/gravityview/extensions-layouts/advanced-filter/677-advanced-filters-upgrade.mdx",tags:[],version:"current",sidebarPosition:677,frontMatter:{id:"5e4b17672c7d3a7e9ae7e14a",number:"677",collectionId:"54d1a05ce4b086c0c0964ccd",popularity:"0.1",publicUrl:"https://docs.gravitykit.com/article/677-advanced-filters-upgrade",viewCount:"611",lastPublishedAt:"2022-10-14T19:21:34Z",changeOrigin:"unknown",name:"(Advanced) What changed from 1.x to 2.0?",slug:"677-advanced-filters-upgrade",status:"published",categories:["54d1a064e4b086c0c0964ccf"],createdBy:"59634",createdAt:"2020-02-17T22:44:55Z",updatedBy:"80506",updatedAt:"2022-10-14T19:21:34Z",title:"(Advanced) What changed from 1.x to 2.0?",hsEditUrl:"https://secure.helpscout.net/docs/54d1a05ce4b086c0c0964ccd/article/5e4b17672c7d3a7e9ae7e14a",pagination_prev:null,pagination_next:null,last_update:{date:"2022-10-14T19:21:34.000Z",author:"Rafael Ehlers"}},sidebar:"advanced-filter"},l={},s=[{value:"Hooks into a different GravityView filter",id:"hooks-into-a-different-gravityview-filter",level:3},{value:"Rewrote the UI in Svelte",id:"rewrote-the-ui-in-svelte",level:3},{value:"Migrated to the new schema",id:"migrated-to-the-new-schema",level:3}],c={toc:s},u="wrapper";function p(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"advanced-what-changed-from-1x-to-20"},"(Advanced) What changed from 1.x to 2.0?"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Note: This article is for developers.")),(0,r.kt)("h3",{id:"hooks-into-a-different-gravityview-filter"},"Hooks into a different GravityView filter"),(0,r.kt)("p",null,"We had been filtering entries using the (deprecated) ",(0,r.kt)("inlineCode",{parentName:"p"},"gravityview_search_criteria")," filter. Now we are using the ",(0,r.kt)("inlineCode",{parentName:"p"},"gravityview/view/query")," filter, which allows us to manipulate a ",(0,r.kt)("inlineCode",{parentName:"p"},"GF_Query")," object instead of a simple array."),(0,r.kt)("h3",{id:"rewrote-the-ui-in-svelte"},"Rewrote the UI in Svelte"),(0,r.kt)("p",null,'In Version 1, we were using the Gravity Forms UI that is used on Gravity Forms\' Entries pages. To allow for more advanced functionality, we developed our own "query builder".'),(0,r.kt)("p",null,"The new UI was written using ",(0,r.kt)("a",{parentName:"p",href:"https://svelte.dev/"},"Svelte")," and requires compilation. Make sure that you have ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en/"},"Node.js")," and ",(0,r.kt)("a",{parentName:"p",href:"https://yarnpkg.com/"},"Yarn")," installed, and then:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to ",(0,r.kt)("inlineCode",{parentName:"li"},"[path to plugin]/assets/js/src")),(0,r.kt)("li",{parentName:"ol"},"Install dependencies by running ",(0,r.kt)("inlineCode",{parentName:"li"},"yarn install")),(0,r.kt)("li",{parentName:"ol"},"Compile assets by running ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run build"))),(0,r.kt)("h3",{id:"migrated-to-the-new-schema"},"Migrated to the new schema"),(0,r.kt)("p",null,"Advanced Filters stores its settings in a post meta named ","_","gravityview","_","filters."),(0,r.kt)("p",null,"Building more complex logic required changing the schema used to store filters. The structure of the data has changed in Version 2."),(0,r.kt)("p",null,"Views using the old schema will have their settings converted only when that View is updated. Until a View is updated, settings will be dynamically converted from the old schema to the new one. See the ",(0,r.kt)("inlineCode",{parentName:"p"},"GravityView_Advanced_Filtering::convert_filters_to_nested()")," method to see how the migration works."))}p.isMDXComponent=!0}}]);